<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>LibTaomee: libtaomee/dirtyword/dirtyword.h文件参考</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- 制作者 Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>首页</span></a></li>
      <li><a href="annotated.html"><span>类</span></a></li>
      <li class="current"><a href="files.html"><span>文件</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>libtaomee/dirtyword/dirtyword.h文件参考</h1>该模块提供了脏词检测的接口，包括读入脏词库，创建搜索结构，以及进行脏词检测等操作。 该模块需要一个配置文件，用来指定脏词库的位置及一些内存映射文件的信息，配置文件的说明详见doc/readme.txt <a href="#_details">更多...</a>
<p>

<p>
<div class="dynheader">
dirtyword.h包含/依赖关系图：</div>
<div class="dynsection">
<p><center><img src="dirtyword_8h__incl.png" border="0" usemap="#libtaomee/dirtyword/dirtyword.h_map" alt=""></center>
<map name="libtaomee/dirtyword/dirtyword.h_map">
<area shape="rect" href="time_8h.html" title="和时间相关的函数。部分函数需要glib支持。" alt="" coords="176,80,232,107"></map>
</div>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>宏定义</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="60d97505fb211eb7bd029ca273bc7d7a"></a><!-- doxytag: member="dirtyword.h::DATA_MTIME_OFFSET" ref="60d97505fb211eb7bd029ca273bc7d7a" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirtyword_8h.html#60d97505fb211eb7bd029ca273bc7d7a">DATA_MTIME_OFFSET</a>&nbsp;&nbsp;&nbsp;0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">用类似makefile的方式，自动的检测脏词库的更新,自动检测程序版本的更新. <br></td></tr>
<tr><td colspan="2"><br><h2>函数</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">DirtyWordHandle *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirtyword_8h.html#d0a4d42a2e6878f8cf4db442f875dd30">getDWH</a> (const char *conf_file_path)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">该函数用于读入脏词库，动态的构建搜索结构，为进行脏词检测做一切初始化工作。  <a href="#d0a4d42a2e6878f8cf4db442f875dd30"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">DirtyWordHandle *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirtyword_8h.html#7efc70be97f834f4635785ce6ced58c2">getDWH_mmap</a> (const char *conf_file_path)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">该函数用于读入脏词库，为进行脏词检测做一切初始化工作 和getDWH不同的是，搜索结构的构建不是动态分配内存，而是通过创建内存映射文件的方式，使不同的进程共享同一搜索结构，  <a href="#7efc70be97f834f4635785ce6ced58c2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirtyword_8h.html#fc4192c18827d174afca30c12bb2e49b">cdw</a> (const char *statement, DirtyWordHandle *m_pDirtyWordHandle)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">该函数用于进行脏词检测  <a href="#fc4192c18827d174afca30c12bb2e49b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="6f3cb06f71507080906c9226c3a45b11"></a><!-- doxytag: member="dirtyword.h::cdwEx" ref="6f3cb06f71507080906c9226c3a45b11" args="(const char *statement, DirtyWordHandle *m_pDirtyWordHandle, int level)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dirtyword_8h.html#6f3cb06f71507080906c9226c3a45b11">cdwEx</a> (const char *statement, DirtyWordHandle *m_pDirtyWordHandle, int level)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">暂时无用 <br></td></tr>
</table>
<hr><a name="_details"></a><h2>详细描述</h2>
该模块提供了脏词检测的接口，包括读入脏词库，创建搜索结构，以及进行脏词检测等操作。 该模块需要一个配置文件，用来指定脏词库的位置及一些内存映射文件的信息，配置文件的说明详见doc/readme.txt 
<p>
============================================================<p>
compiler gcc4.1.2 platform Linux<p>
copyright: TaoMee, Inc. ShangHai CN. All rights reserved.<p>
============================================================ <hr><h2>函数文档</h2>
<a class="anchor" name="fc4192c18827d174afca30c12bb2e49b"></a><!-- doxytag: member="dirtyword.h::cdw" ref="fc4192c18827d174afca30c12bb2e49b" args="(const char *statement, DirtyWordHandle *m_pDirtyWordHandle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cdw           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>statement</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DirtyWordHandle *&nbsp;</td>
          <td class="paramname"> <em>m_pDirtyWordHandle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
该函数用于进行脏词检测 
<p>
<dl compact><dt><b>参数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>statement</em>&nbsp;</td><td>要检测的字符串 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>m_pDirtyWordHandle</em>&nbsp;</td><td>从getDWH(getDWH_mmap)获得的指针</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>返回:</b></dt><dd>如果检测出脏词,返回脏词等级,否则返回0 </dd></dl>

</div>
</div><p>
<a class="anchor" name="d0a4d42a2e6878f8cf4db442f875dd30"></a><!-- doxytag: member="dirtyword.h::getDWH" ref="d0a4d42a2e6878f8cf4db442f875dd30" args="(const char *conf_file_path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DirtyWordHandle* getDWH           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>conf_file_path</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
该函数用于读入脏词库，动态的构建搜索结构，为进行脏词检测做一切初始化工作。 
<p>
<dl compact><dt><b>参数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>conf_file_path</em>&nbsp;</td><td>配置文件，关于配置文件的介绍见readme.txt</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>返回:</b></dt><dd>失败返回NULL </dd></dl>

</div>
</div><p>
<a class="anchor" name="7efc70be97f834f4635785ce6ced58c2"></a><!-- doxytag: member="dirtyword.h::getDWH_mmap" ref="7efc70be97f834f4635785ce6ced58c2" args="(const char *conf_file_path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DirtyWordHandle* getDWH_mmap           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>conf_file_path</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
该函数用于读入脏词库，为进行脏词检测做一切初始化工作 和getDWH不同的是，搜索结构的构建不是动态分配内存，而是通过创建内存映射文件的方式，使不同的进程共享同一搜索结构， 
<p>
<dl class="remark" compact><dt><b>评论:</b></dt><dd>这样做的好处节省了物理内存空间，并且在函数中还进行了类似makefile的自动时间检测，当脏词库或者程序被更新时能够自动生成新的映射文件</dd></dl>
<dl compact><dt><b>参数:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>conf_file_path</em>&nbsp;</td><td>配置文件，关于配置文件的介绍见doc/readme.txt</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>返回:</b></dt><dd>失败返回NULL </dd></dl>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated at Thu Nov 26 17:06:52 2009 for LibTaomee by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
